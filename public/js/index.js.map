{"version":3,"file":"index.js","mappings":"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","sources":["webpack://record-table/./node_modules/tripartite/tripartite.js","webpack://record-table/./node_modules/tripartite/evaluate-in-context.js","webpack://record-table/./node_modules/tripartite/calculate-relative-path.js","webpack://record-table/./node_modules/tripartite/resolve-data-path.js","webpack://record-table/./node_modules/tripartite/execution-context.js","webpack://record-table/./node_modules/tripartite/active-element.js","webpack://record-table/webpack/bootstrap","webpack://record-table/webpack/runtime/global"],"sourcesContent":["\n\n\nif (typeof String.prototype.trim !== 'function') {\n\tString.prototype.trim = function () {\n\t\treturn this.replace(/^\\s+|\\s+$/g, '');\n\t}\n}\n\n\nfunction isStream(stream) {\n\treturn stream !== null\n\t\t&& typeof stream === 'object'\n\t\t&& typeof stream.pipe === 'function';\n}\n\n\nfunction isTemplate(obj) {\n\tif (!obj) {\n\t\treturn false\n\t}\n\tif (typeof obj !== 'function') {\n\t\treturn false\n\t}\n\tif (!obj.write) {\n\t\treturn false\n\t}\n\tif (!obj.parts) {\n\t\treturn false\n\t}\n\tif (!obj.templateMeta) {\n\t\treturn false\n\t}\n\n\treturn true\n}\n\nlet ExecutionContext = require('./execution-context')\nlet ActiveElement = require('./active-element')\n\n\nclass Tripartite {\n\tconstructor(options = {}) {\n\t\tthis.templates = {\n\t\t\tdefaultTemplate: this._makeTemplate(function (thedata) {\n\t\t\t\treturn '' + thedata;\n\t\t\t})\n\t\t}\n\t\tlet { constants = {\n\t\t\ttemplateBoundary: '__',\n\t\t\ttemplateNameBoundary: '##'\n\t\t} } = options\n\t\tthis.constants = constants\n\n\t\t// This object (if set) will receive the template functions parsed from a script\n\t\t// I want to be able to call my templates as global functions, so I've set it\n\t\t// to be the window object\n\t\tthis.secondaryTemplateFunctionObject = options.secondaryTemplateFunctionObject\n\n\t\tthis.loaders = options.loaders || []\n\n\t\tthis.dataFunctions = options.dataFunction || {}\n\t}\n\n\t_makeTemplate(transformationFunction) {\n\t\tif (isTemplate(transformationFunction)) {\n\t\t\treturn transformationFunction\n\t\t}\n\t\tlet tri = this\n\t\tlet f = function (thedata) {\n\t\t\tlet stream = null\n\t\t\tlet options = null\n\t\t\tlet callback = null\n\t\t\tfor (let i = 1; i < arguments.length; i++) {\n\t\t\t\tlet arg = arguments[i]\n\t\t\t\tif (isStream(arg)) {\n\t\t\t\t\tstream = arg\n\t\t\t\t}\n\t\t\t\telse if(typeof arg === 'function') {\n\t\t\t\t\tcallback = arg\n\t\t\t\t}\n\t\t\t\telse if(typeof arg === 'object') {\n\t\t\t\t\toptions = arg\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn f.write(thedata, stream, callback, options)\n\t\t}\n\t\tf.write = function (thedata, stream, callback, options = {}) {\n\t\t\tif(transformationFunction && transformationFunction.write) {\n\t\t\t\t// if it's not a template, but has a write method, invoke the right method directly\n\t\t\t\treturn transformationFunction.write.apply(transformationFunction, arguments)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet dest = stream || ''\n\n\t\t\t\tlet context = new ExecutionContext(tri, f, thedata, dest, tri.dataFunctions)\n\t\t\t\tif (options && 'continueOnTripartiteError' in options) {\n\t\t\t\t\tcontext.continueOnTripartiteError = options.continueOnTripartiteError\n\t\t\t\t}\n\n\t\t\t\treturn context.run(callback)\n\t\t\t}\n\t\t}\n\t\tf.parts = []\n\t\tif (transformationFunction && typeof transformationFunction === 'function') {\n\t\t\tf.parts.push(transformationFunction)\n\t\t}\n\t\tf.templateMeta = {}\n\t\treturn f\n\t}\n\n\taddTemplate(name, template) {\n\t\tif (typeof template === 'string') {\n\t\t\ttemplate = this.parseTemplate(template);\n\t\t}\n\t\telse if (typeof template === 'function') {\n\t\t\ttemplate = this._makeTemplate(template)\n\t\t}\n\n\t\tthis.templates[name] = template;\n\t\ttemplate.templateMeta = template.templateMeta || {}\n\t\ttemplate.templateMeta.name = name\n\t\treturn template;\n\t}\n\n\tcreateBlank() {\n\t\treturn new Tripartite()\n\t}\n\n\tgetTemplate(name) {\n\t\treturn this.templates[name]\n\t}\n\n\tloadTemplate(name, callback) {\n\t\tif (name in this.templates) {\n\t\t\tcallback(this.templates[name])\n\t\t}\n\t\telse {\n\t\t\tlet tri = this\n\t\t\tlet count = this.loaders.length\n\t\t\tlet done = false\n\n\t\t\tif (count == 0) {\n\t\t\t\ttri.templates[name] = null\n\t\t\t\tcallback(tri.getTemplate(name))\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.loaders.forEach(loader => {\n\t\t\t\t\tif (done) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tloader(name, template => {\n\t\t\t\t\t\tif (done) {\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcount--\n\t\t\t\t\t\tif (template) {\n\t\t\t\t\t\t\tdone = true\n\t\t\t\t\t\t\ttri.addTemplate(name, template)\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (count == 0) {\n\t\t\t\t\t\t\tdone = true\n\t\t\t\t\t\t\ttri.templates[name] = null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (done) {\n\t\t\t\t\t\t\tcallback(tri.getTemplate(name))\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\tparseTemplateScript(tx) {\n\t\tvar tks = this.tokenizeTemplateScript(tx);\n\t\t/* current template name */\n\t\tvar ctn = null;\n\t\tfor (var i = 0; i < tks.length; i++) {\n\t\t\tvar token = tks[i];\n\t\t\tif (token.active) {\n\t\t\t\tctn = token.content;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (ctn) {\n\t\t\t\t\tvar template = this.addTemplate(ctn, this.stripTemplateWhitespace(token.content));\n\t\t\t\t\tif (this.secondaryTemplateFunctionObject) {\n\t\t\t\t\t\tthis.secondaryTemplateFunctionObject[ctn] = template;\n\t\t\t\t\t}\n\t\t\t\t\tctn = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstripTemplateWhitespace(txt) {\n\t\tvar i = txt.indexOf('\\n');\n\t\tif (i > -1 && txt.substring(0, i).trim() == '') {\n\t\t\ttxt = txt.substring(i + 1);\n\t\t}\n\t\ti = txt.lastIndexOf('\\n');\n\t\tif (i > -1 && txt.substring(i).trim() == '') {\n\t\t\ttxt = txt.substring(0, i);\n\t\t}\n\t\treturn txt;\n\t}\n\n\t/* simple template */\n\t_createActiveElement(/* conditional expression */ cd, data, /* handling expression */ hd, tripartite, templateMeta) {\n\t\tlet el = new ActiveElement(cd, data, hd, tripartite);\n\t\tel.templateMeta = templateMeta\n\t\treturn el\n\t}\n\tpt(tx) {\n\t\treturn this.parseTemplate(tx)\n\t}\n\t/* parse template */\n\tparseTemplate(tx) {\n\t\tvar tks = this.tokenizeTemplate(tx);\n\t\tlet t = this._makeTemplate()\n\t\tvar templateMeta = t.templateMeta\n\n\t\tfor (let tk of tks) {\n\t\t\tif (tk.active) {\n\t\t\t\tt.parts.push(this.tokenizeActivePart(tk.content, templateMeta));\n\t\t\t}\n\t\t\telse if (tk.content) {\n\t\t\t\tt.parts.push(tk.content);\n\t\t\t}\n\t\t}\n\n\t\treturn t\n\t}\n\n\ttokenizeActivePart(tx, templateMeta) {\n\t\tvar con = null;\n\t\tvar dat = null;\n\t\tvar han = null;\n\n\t\t/* condition index */\n\t\tvar ci = tx.indexOf('??');\n\t\tif (ci > -1) {\n\t\t\tcon = tx.substring(0, ci);\n\t\t\tci += 2;\n\t\t}\n\t\telse {\n\t\t\tci = 0;\n\t\t}\n\n\t\t/* handler index */\n\t\tvar hi = tx.indexOf('::');\n\t\tif (hi > -1) {\n\t\t\tdat = tx.substring(ci, hi);\n\t\t\than = tx.substring(hi + 2);\n\t\t}\n\t\telse {\n\t\t\tdat = tx.substring(ci);\n\t\t}\n\t\treturn this._createActiveElement(con, dat, han, this, templateMeta);\n\t}\n\n\ttokenizeTemplate(tx) {\n\t\treturn this.tokenizeActiveAndInactiveBlocks(tx, this.constants.templateBoundary);\n\t}\n\n\n\t/** tokenize template script */\n\ttokenizeTemplateScript(tx) {\n\t\treturn this.tokenizeActiveAndInactiveBlocks(tx, this.constants.templateNameBoundary);\n\t}\n\n\t/* tokenize active and inactive blocks */\n\ttokenizeActiveAndInactiveBlocks(text, /*Active Region Boundary */ boundary) {\n\t\t/* whole length */\n\t\tlet length = text.length\n\n\t\t/* current position */\n\t\tlet position = 0\n\n\t\t/* are we in an active region */\n\t\tlet act = false\n\n\t\tlet tokens = []\n\n\t\twhile (position < length) {\n\t\t\tlet i = text.indexOf(boundary, position);\n\t\t\tif (i == -1) {\n\t\t\t\ti = length;\n\t\t\t}\n\t\t\tvar tk = { active: act, content: text.substring(position, i) };\n\t\t\ttokens.push(tk);\n\t\t\tposition = i + boundary.length;\n\t\t\tact = !act;\n\t\t}\n\n\t\treturn tokens;\n\t}\n\n}\nvar tripartiteInstance = new Tripartite()\n\nif (typeof window != 'undefined') {\n\ttripartiteInstance.secondaryTemplateFunctionObject = window\n}\n\n\nif (typeof module !== 'undefined') {\n\tmodule.exports = tripartiteInstance\n}\nelse {\n\twindow.Tripartite = tripartiteInstance\n}\n\nif (typeof global != 'undefined') {\n\tif (!global.Tripartite) {\n\t\tglobal.Tripartite = Tripartite\n\t}\n\tif (!global.tripartite) {\n\t\tglobal.tripartite = tripartiteInstance\n\t}\n}\n\n","\nconst resolveDataPath = require('./resolve-data-path')\nfunction evaluateInContext(context, expression, dataFunctions, globalData) {\n\tif (!expression) {\n\t\treturn null\n\t}\n\tif (typeof expression === 'string') {\n\t\texpression = expression.trim()\n\t}\n\n\tif (expression === '$this' || expression === 'this') {\n\t\treturn context\n\t}\n\tif (typeof context === 'object' && expression in context) {\n\t\treturn context[expression]\n\t}\n\tif (expression === '\"\"' || expression === \"''\") {\n\t\treturn ''\n\t}\n\tlet resolved = resolveDataPath(context, expression)\n\tif (resolved === null || resolved === undefined) {\n\t\tresolved = resolveDataPath({\n\t\t\t'$globals': globalData\n\t\t}, expression)\n\t}\n\tif (resolved === null || resolved === undefined) {\n\t\tresolved = _evaluateInContext.call(context, context, expression, dataFunctions, globalData)\n\t}\n\treturn resolved\n}\n\nlet evalFunction = new Function('additionalContexts',\n\t`with ({\n\t\t'$globals': additionalContexts.globalData\n\t}) {\n\t\twith (additionalContexts.dataFunctions) {\n\t\t\twith (additionalContexts.context) {\n\t\t\t\ttry {\n\t\t\t\t\treturn eval(additionalContexts.expression);\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}`\n)\n\nfunction _evaluateInContext(context, expression, dataFunctions, globalData) {\n\tdataFunctions = dataFunctions || {}\n\tglobalData = globalData || {}\n\n\n\tlet result = evalFunction.call(this, {\n\t\tglobalData: globalData\n\t\t, dataFunctions: dataFunctions\n\t\t, context: context\n\t\t, expression: expression\n\t})\n\treturn result\n}\n\nmodule.exports = evaluateInContext","var calculateRelativePath = function(parentPath, currentPath) {\n\tif(!parentPath) {\n\t\treturn currentPath\n\t}\n\tif(!currentPath) {\n\t\treturn currentPath\n\t}\n\t\n\tif(currentPath.indexOf('../') != 0 && currentPath.indexOf('./') != 0) {\n\t\treturn currentPath\n\t}\n\t\n\tvar pparts = parentPath.split('/')\n\tvar cparts = currentPath.split('/')\n\t\n\t// trim any starting blank sections\n\twhile(pparts.length && !pparts[0]) {\n\t\tpparts.shift()\n\t}\n\twhile(cparts.length && !cparts[0]) {\n\t\tcparts.shift()\n\t}\n\t\n\tif(currentPath.indexOf('../') == 0 ) {\n\t\twhile(cparts.length && cparts[0] == '..') {\n\t\t\tpparts.pop()\n\t\t\tcparts.shift()\n\t\t}\n\t\tpparts.pop()\n\t\t\n\t\twhile(cparts.length) {\n\t\t\tpparts.push(cparts.shift())\n\t\t}\n\t\treturn pparts.join('/')\n\t}\n\tif(currentPath.indexOf('./') == 0 ) {\n\t\tcparts.shift()\n\t\tpparts.pop()\n\t\twhile(cparts.length) {\n\t\t\tpparts.push(cparts.shift())\n\t\t}\n\t\treturn pparts.join('/')\n\t}\n\t\n\treturn currentPath\n}\n\nmodule.exports = calculateRelativePath","/*\nfunction resolveDataPath(data, path) {\n\tif(data === null || data === undefined) {\n\t\treturn data\n\t}\n\tlet parts\n\tif(typeof path === 'string') {\n\t\tparts = path.trim().split('.')\n\t}\n\telse if(Array.isArray(path)) {\n\t\tparts = path\n\t}\n\t\n\tlet name = parts.shift()\n\tif(name.indexOf(' ') > -1) {\n\t\t// there's a space, which means it's really unlikely it's a property\n\t\treturn null\n\t}\n\tlet child\n\tif(name === 'this' || name === '$this') {\n\t\tchild = data\n\t}\n\telse if(typeof data === 'object') {\n\t\tif(name in data) {\n\t\t\tchild = data[name]\n\t\t}\n\t}\n\tif(parts.length > 0) {\n\t\treturn resolveDataPath(child, parts)\n\t}\n\telse {\n\t\treturn child\n\t}\n} */\nfunction resolveDataPath(data, path) {\n\ttry {\n\t\tif (data === null || data === undefined) {\n\t\t\treturn data\n\t\t}\n\t\tlet parts\n\t\tif (typeof path === 'string') {\n\t\t\tparts = path.trim().split('.')\n\t\t}\n\t\telse if (Array.isArray(path)) {\n\t\t\tparts = path\n\t\t}\n\n\t\twhile (parts.length > 0) {\n\t\t\tlet name = parts.shift()\n\t\t\tif (name.indexOf(' ') > -1) {\n\t\t\t\t// there's a space, which means it's really unlikely it's a property\n\t\t\t\treturn null\n\t\t\t}\n\t\t\tlet child\n\t\t\tif (name === 'this' || name === '$this') {\n\t\t\t\tchild = data\n\t\t\t}\n\t\t\telse if (typeof data === 'object') {\n\t\t\t\tif (name in data) {\n\t\t\t\t\tchild = data[name]\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (parts.length == 0) {\n\t\t\t\treturn child\n\t\t\t}\n\t\t\tif (child === null || child === undefined) {\n\t\t\t\treturn null\n\t\t\t}\n\t\t\tdata = child\n\t\t}\n\t}\n\tcatch (e) {\n\t\treturn null\n\t}\n}\n\nmodule.exports = resolveDataPath","\nlet ActiveElement = require('./active-element')\nvar calculateRelativePath = require('./calculate-relative-path')\nlet evaluateInContext = require('./evaluate-in-context')\n\nclass ExecutionContext {\n\t/**\n\t * \n\t * @param {Tripartite} tripartite \n\t * @param {function} template \n\t * @param {stream} [destination]\n\t */\n\tconstructor(tripartite, template, data = {}, destination = '', dataFunctions = {}) {\n\t\tthis.tripartite = tripartite\n\t\tthis.template = template\n\t\tthis.destination = destination\n\t\tthis.initialData = data\n\t\tthis.currentData = []\n\t\tthis.dataFunctions = dataFunctions\n\t\tthis.continueOnTripartiteError = true\n\t\t\n\t\t// Sometimes large pages have so many elements that we exceed\n\t\t// the maximum call depth. This happens when we have a lot of elements all being\n\t\t// rendered by the same templates. That is, there's no async callback when a template\n\t\t// is loaded, only instant callbacks.\n\t\t// The downside to doing very frequent async calls is that it takes a lot longer to\n\t\t// to get called from a setTimeout than it does to call directly. We want ot keep\n\t\t// the time between needing to do that reasonably long. Unfortunately, there's no\n\t\t// easy/fast way to detect the call stack depth, so we rely on this proxy.\n\t\tthis.callCount = 0\n\t\tthis.callDepthLimit = 1000\n\t}\n\n\t/**\n\t * \n\t * @param {function} [callback] called when done\n\t * @returns Returns the string of stream as the result of the operation\n\t */\n\trun(callback) {\n\t\tlet ourCallback\n\t\tif (callback) {\n\t\t\tourCallback = () => {\n\t\t\t\tcallback(null, this.destination)\n\t\t\t}\n\t\t}\n\n\t\tthis._run(this.template, this.initialData, ourCallback)\n\n\t\treturn this.destination\n\t}\n\n\t_resolveHandlingExpression(template, handlingExpression, data) {\n\t\tif (!handlingExpression) {\n\t\t\thandlingExpression = defaultTemplateName\n\t\t}\n\t\tif (handlingExpression.charAt(0) == '$') {\n\t\t\t// Indicates the handling espression is not a literal template name but is a string which should\n\t\t\t// be evaluated to determine the template name\n\t\t\thandlingExpression = evaluateInContext(data, handlingExpression.substring(1), this.dataFunctions, this.initialData)\n\t\t}\n\t\t// resolve relative template paths\n\t\tif (handlingExpression.indexOf('./') == 0 || handlingExpression.indexOf('../') == 0) {\n\t\t\thandlingExpression = calculateRelativePath(template.templateMeta.name, handlingExpression)\n\t\t}\n\n\t\treturn handlingExpression\n\t}\n\n\t_run(template, data, callback) {\n\t\tlet parts = [...template.parts].reverse()\n\t\tconst processParts = () => {\n\t\t\t\n\t\t\t// check to see how far down in the call stack we are. If too far down,\n\t\t\t// come back in the next tick.\n\t\t\tthis.callCount++\n\t\t\tif(this.callCount++ > this.callDepthLimit) {\n\t\t\t\tsetTimeout(()=> {\n\t\t\t\t\tthis.callCount = 0\n\t\t\t\t\tprocessParts()\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (parts.length > 0) {\n\t\t\t\tlet part = parts.pop()\n\t\t\t\tif (typeof part === 'string') {\n\t\t\t\t\tthis.output(part)\n\t\t\t\t\tprocessParts()\n\t\t\t\t}\n\t\t\t\telse if (part instanceof ActiveElement) {\n\t\t\t\t\tlet conditional = part.conditionalExpression || part.dataExpression\n\t\t\t\t\tlet conditionalResult = false\n\t\t\t\t\tlet resultData\n\t\t\t\t\tif (conditional == null || conditional == undefined || conditional === '') {\n\t\t\t\t\t\t// Because if they didn't specify a condition or data, they probably \n\t\t\t\t\t\t// just want the template to be run as is\n\t\t\t\t\t\tconditionalResult = true\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif(part.conditionalExpression) {\n\t\t\t\t\t\t\tlet result = evaluateInContext(data, part.conditionalExpression, this.dataFunctions, this.initialData)\n\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\tconditionalResult = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// This means we're evaluating the data expression to see if we should run the template\n\t\t\t\t\t\t\tresultData = evaluateInContext(data, part.dataExpression, this.dataFunctions, this.initialData)\n\t\t\t\t\t\t\tif(resultData === null || resultData === undefined) {\n\t\t\t\t\t\t\t\tconditionalResult = false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (typeof resultData === 'number') {\n\t\t\t\t\t\t\t\t// if the result is a number, any number, we want to output it\n\t\t\t\t\t\t\t\t// unless the number is from the conditional expression, in which\n\t\t\t\t\t\t\t\t// case we want to evaluate it as truthy\n\t\t\t\t\t\t\t\tconditionalResult = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(Array.isArray(resultData) && resultData.length > 0) {\n\t\t\t\t\t\t\t\tconditionalResult = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(resultData) {\n\t\t\t\t\t\t\t\tconditionalResult = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif (conditionalResult) {\n\t\t\t\t\t\tif (part.dataExpression && resultData === undefined) {\n\t\t\t\t\t\t\tresultData = evaluateInContext(data, part.dataExpression, this.dataFunctions, this.initialData)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif((resultData === null || resultData === undefined) && !part.dataExpression) {\n\t\t\t\t\t\t\tresultData = data\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet handlingExpression = this._resolveHandlingExpression(template, part.handlingExpression, data)\n\t\t\t\t\t\tlet handlingTemplate\n\t\t\t\t\t\tlet children = (Array.isArray(resultData) ? [...resultData] : [resultData]).reverse()\n\t\t\t\t\t\tconst applyTemplate = () => {\n\t\t\t\t\t\t\tif (children.length > 0) {\n\t\t\t\t\t\t\t\tlet child = children.pop()\n\t\t\t\t\t\t\t\tthis._run(handlingTemplate, child, () => {\n\t\t\t\t\t\t\t\t\tapplyTemplate()\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tprocessParts()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(handlingExpression in this.tripartite.templates) {\n\t\t\t\t\t\t\thandlingTemplate = this.tripartite.getTemplate(handlingExpression)\n\t\t\t\t\t\t\tif (handlingTemplate) {\n\t\t\t\t\t\t\t\tapplyTemplate()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// the template has been loaded before but is empty\n\t\t\t\t\t\t\t\tif (this.continueOnTripartiteError) {\n\t\t\t\t\t\t\t\t\tprocessParts()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis.tripartite.loadTemplate(handlingExpression, (template) => {\n\t\t\t\t\t\t\t\tif (!template) {\n\t\t\t\t\t\t\t\t\tlet msg = 'Could not load template: ' + handlingExpression\n\t\t\t\t\t\t\t\t\tconsole.error(msg)\n\t\t\t\t\t\t\t\t\tif (this.continueOnTripartiteError) {\n\t\t\t\t\t\t\t\t\t\tprocessParts()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tlet err = new Error(msg)\n\t\t\t\t\t\t\t\t\t\tif (callback) {\n\t\t\t\t\t\t\t\t\t\t\tcallback(err)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\tthrow err\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\thandlingTemplate = template\n\t\t\t\t\t\t\t\t\tapplyTemplate()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tprocessParts()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (typeof part === 'function') {\n\t\t\t\t\tif(part.write) {\n\t\t\t\t\t\tpart.write(data, this.destination, () => {\n\t\t\t\t\t\t\tprocessParts()\n\t\t\t\t\t\t})\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.output(part(data))\n\t\t\t\t\t\tprocessParts()\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprocessParts()\n\t}\n\n\t/**\n\t * \n\t * @param {string} value \n\t */\n\toutput(value) {\n\t\tif(value === null || value === undefined) {\n\t\t\treturn\n\t\t}\n\t\tif (typeof this.destination === 'string') {\n\t\t\tthis.destination += value\n\t\t}\n\t\telse if (this.destination.write) {\n\t\t\tthis.destination.write(value)\n\t\t}\n\t}\n}\n\n\nmodule.exports = ExecutionContext","\nconst defaultTemplateName = 'defaultTemplate'\n\nclass ActiveElement {\n\tconstructor(conditionalExpression, dataExpression, handlingExpression, tripartite) {\n\t\tthis.conditionalExpression = conditionalExpression\n\t\tthis.dataExpression = dataExpression\n\t\tthis.handlingExpression = handlingExpression || defaultTemplateName\n\t\tthis.tripartite = tripartite\n\t}\n}\n\nmodule.exports = ActiveElement","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();"],"names":["isStream","stream","pipe","String","prototype","trim","this","replace","ExecutionContext","ActiveElement","Tripartite","constructor","options","templates","defaultTemplate","_makeTemplate","thedata","constants","templateBoundary","templateNameBoundary","secondaryTemplateFunctionObject","loaders","dataFunctions","dataFunction","transformationFunction","obj","write","parts","templateMeta","tri","f","callback","i","arguments","length","arg","apply","context","continueOnTripartiteError","run","push","addTemplate","name","template","parseTemplate","createBlank","getTemplate","loadTemplate","count","done","forEach","loader","parseTemplateScript","tx","tks","tokenizeTemplateScript","ctn","token","active","content","stripTemplateWhitespace","txt","indexOf","substring","lastIndexOf","_createActiveElement","cd","data","hd","tripartite","el","pt","tokenizeTemplate","t","tk","tokenizeActivePart","con","dat","han","ci","hi","tokenizeActiveAndInactiveBlocks","text","boundary","position","act","tokens","tripartiteInstance","window","module","exports","g","resolveDataPath","evalFunction","Function","_evaluateInContext","expression","globalData","call","resolved","parentPath","currentPath","pparts","split","cparts","shift","pop","join","path","Array","isArray","child","e","calculateRelativePath","evaluateInContext","destination","initialData","currentData","callCount","callDepthLimit","ourCallback","_run","_resolveHandlingExpression","handlingExpression","defaultTemplateName","charAt","reverse","processParts","setTimeout","part","output","resultData","conditional","conditionalExpression","dataExpression","conditionalResult","undefined","handlingTemplate","children","applyTemplate","msg","console","error","err","Error","value","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","globalThis"],"sourceRoot":""}